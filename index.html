<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research Proposal Builder Pro - AI Powered</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-50 min-h-screen relative pb-20">

    <header class="gradient-bg text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center space-x-3">
                <i class="fas fa-graduation-cap text-3xl"></i>
                <div>
                    <h1 class="text-2xl font-bold">Research Proposal Builder Pro</h1>
                    <p class="text-sm opacity-90">Aplikasi pendamping bagi para Peneliti Pontren Husnul Khotimah</p>
                </div>
            </div>
            <div class="flex items-center space-x-4 bg-white/10 px-4 py-2 rounded-xl backdrop-blur-sm border border-white/20">
                <img src="logo1.png" alt="Logo Pontren" class="h-10 w-auto object-contain rounded-md shadow-sm">
                <div class="w-px h-8 bg-white/30"></div> 
                <img src="logo2.png" alt="Logo Kemenag" class="h-10 w-auto object-contain drop-shadow-md">
                <div class="w-px h-8 bg-white/30"></div> 
                <img src="logo3.png" alt="Logo Kampus" class="h-10 w-auto object-contain drop-shadow-md">
            </div>
        </div>
    </header>

    <div class="bg-white shadow-sm border-b relative z-40">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center max-w-4xl mx-auto">
                <div class="flex flex-col items-center">
                    <div id="step1-indicator" class="w-10 h-10 rounded-full step-active flex items-center justify-center font-bold mb-2">1</div>
                    <span class="text-xs font-medium text-center mt-1">Cari Jurnal</span>
                </div>
                <div class="flex-1 h-1 bg-gray-200 mx-2 md:mx-4 rounded">
                    <div id="progress-line" class="h-full bg-gradient-to-r from-indigo-500 to-purple-600 w-0 transition-all duration-500 rounded"></div>
                </div>
                <div class="flex flex-col items-center">
                    <div id="step2-indicator" class="w-10 h-10 rounded-full step-inactive flex items-center justify-center font-bold mb-2">2</div>
                    <span class="text-xs font-medium text-center mt-1">Kaji (Tik-Tok)</span>
                </div>
                <div class="flex-1 h-1 bg-gray-200 mx-2 md:mx-4 rounded"></div>
                <div class="flex flex-col items-center">
                    <div id="step3-indicator" class="w-10 h-10 rounded-full step-inactive flex items-center justify-center font-bold mb-2">3</div>
                    <span class="text-xs font-medium text-center mt-1">Analisis</span>
                </div>
                <div class="flex-1 h-1 bg-gray-200 mx-2 md:mx-4 rounded"></div>
                <div class="flex flex-col items-center">
                    <div id="step4-indicator" class="w-10 h-10 rounded-full step-inactive flex items-center justify-center font-bold mb-2">4</div>
                    <span class="text-xs font-medium text-center mt-1">Judul Baru</span>
                </div>
                <div class="flex-1 h-1 bg-gray-200 mx-2 md:mx-4 rounded"></div>
                <div class="flex flex-col items-center">
                    <div id="step5-indicator" class="w-10 h-10 rounded-full step-inactive flex items-center justify-center font-bold mb-2">5</div>
                    <span class="text-xs font-medium text-center mt-1">Proposal Final</span>
                </div>
            </div>
        </div>
    </div>

    <main class="container mx-auto px-6 py-8 max-w-6xl">

        <section id="step1" class="visible-section relative">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Langkah 1: Cari Referensi Jurnal</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">Masukkan keyword penelitian Anda untuk menemukan jurnal-jurnal akademik yang relevan.</p>
            </div>

            <div class="bg-white rounded-2xl shadow-xl p-8 mb-8 border border-gray-100">
                <div class="flex gap-4 mb-4">
                    <div class="flex-1 relative">
                        <i class="fas fa-search absolute left-4 top-4 text-gray-400"></i>
                        <input type="text" id="searchKeyword" placeholder="Contoh: machine learning, renewable energy, behavioral economics..." 
                               class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none text-lg">
                    </div>
                    <button onclick="searchJournals()" class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all flex-shrink-0">
                        <i class="fas fa-search md:mr-2"></i><span class="hidden md:inline">Cari Jurnal</span>
                    </button>
                </div>
                
                <div class="flex gap-2 flex-wrap justify-center pt-4 mt-2 border-t border-gray-100">
                    <span class="text-sm text-gray-500 flex items-center mr-1">Sumber Utama:</span>
                    <span class="px-3 py-1 bg-blue-50 border border-blue-100 text-blue-600 rounded-full text-xs font-medium">Google Scholar</span>
                    <span class="px-3 py-1 bg-green-50 border border-green-100 text-green-600 rounded-full text-xs font-medium">SINTA</span>
                    <span class="px-3 py-1 bg-yellow-50 border border-yellow-100 text-yellow-600 rounded-full text-xs font-medium">Garuda</span>
                    <span class="px-3 py-1 bg-teal-50 border border-teal-100 text-teal-600 rounded-full text-xs font-medium">DOAJ</span>
                </div>
            </div>

            <div id="searchResults" class="grid gap-4">
                <div class="text-center py-12 text-gray-400">
                    <i class="fas fa-book-open text-6xl mb-4 opacity-30"></i>
                    <p>Hasil pencarian akan muncul di sini</p>
                </div>
            </div>

            <div class="sticky bottom-0 z-40 bg-gray-50/95 backdrop-blur pt-4 pb-4 border-t border-gray-200 mt-8 flex justify-end hidden" id="nav-step1">
                <button onclick="goToStep(2)" class="bg-gray-800 text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-700 transition-all shadow-lg shadow-gray-400/50">
                    Lanjut ke Kajian <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </section>

        <section id="step2" class="hidden-section relative">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Langkah 2: Kaji Jurnal (Sistem Tik-Tok)</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">Copy prompt → Paste ke Gemini + Teks Jurnal → Copy hasil tabel → Paste ke aplikasi.</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                    <h3 class="text-xl font-bold mb-4 flex items-center text-indigo-600">
                        <i class="fas fa-magic mr-3"></i>Prompt Step 2 (Copy Ini)
                    </h3>
                    
                    <div class="flex-grow flex flex-col mb-4">
                        <div class="bg-gray-900 rounded-xl p-4 mb-4 relative flex-grow overflow-hidden min-h-[300px]">
                            <button onclick="copyPromptText('step2-prompt')" class="copy-btn absolute top-2 right-2 bg-indigo-600 text-white px-3 py-1 rounded text-xs hover:bg-indigo-700 transition-all z-10" data-prompt-id="step2-prompt">
                                <i class="fas fa-copy mr-1"></i>Copy
                            </button>
                            <div class="absolute inset-0 p-4 overflow-y-auto mt-8 custom-scrollbar">
                                <pre id="step2-prompt" class="text-green-400 text-xs whitespace-pre-wrap font-mono m-0">ANALISIS JURNAL - OUTPUT FORMAT TABEL

Baca jurnal berikut dan berikan output HANYA dalam format tabel di bawah ini (tanpa penjelasan tambahan):

[INSERT TEKS JURNAL DISINI]

OUTPUT HARUS PERSIS FORMAT INI:

| Field | Isi |
|-------|-----|
| Judul Lengkap | [isi] |
| Penulis & Afiliasi | [Nama1 - Institusi1; Nama2 - Institusi2] |
| Tahun | [YYYY] |
| Nama Jurnal | [nama lengkap jurnal] |
| Publisher | [nama publisher] |
| Volume | [angka] |
| Issue | [angka] |
| ISSN | [kode] |
| DOI | [isi atau "Tidak tersedia"] |
| Halaman | [halaman] |

---

| Field | Isi |
|-------|-----|
| Keywords | [keyword1, keyword2, keyword3] |
| Bahasa | [Indonesia/Inggris] |

---

| Field | Isi |
|-------|-----|
| Research Gap | [3-5 kalimat ringkas] |
| Tujuan Penelitian | [poin1; poin2; poin3] |
| Metode Singkat | [jenis, alat utama, platform] |
| Hasil Utama | [temuan kunci 1-2 kalimat] |</pre>
                            </div>
                        </div>

                        <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-3">
                            <p class="text-xs text-yellow-800 flex items-start">
                                <i class="fas fa-lightbulb mr-2 mt-0.5"></i>
                                <span>Buka jurnal PDF → Select All → Copy → Paste ke Gemini bersama prompt.</span>
                            </p>
                        </div>
                    </div>

                    <button onclick="openGeminiWithPrompt('step2-prompt')" class="mt-auto w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg flex-shrink-0">
                        <i class="fas fa-external-link-alt mr-2"></i>Buka Gemini & Auto-Paste
                    </button>
                </div>

                <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                    <h3 class="text-xl font-bold mb-4 flex items-center text-green-600">
                        <i class="fas fa-paste mr-3"></i>Paste Hasil dari Gemini
                    </h3>
                    
                    <div class="flex-grow mb-4 flex flex-col relative min-h-[300px]">
                        <textarea id="geminiOutputStep2" class="w-full h-full absolute inset-0 p-4 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none font-mono text-sm table-output resize-none custom-scrollbar" placeholder="Paste hasil tabel dari Gemini AI di sini..."></textarea>
                    </div>

                    <button onclick="parseStep2Output()" class="mt-auto w-full bg-gradient-to-r from-green-600 to-teal-600 text-white py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-[1.02] transition-all flex-shrink-0">
                        <i class="fas fa-magic mr-2"></i>Parse & Simpan Otomatis
                    </button>
                </div>
            </div>

            <div class="mt-8 bg-white rounded-2xl shadow-xl p-6 border border-gray-100">
                <h3 class="text-xl font-bold mb-4 border-b pb-2">Data Jurnal Tersimpan</h3>
                <div id="savedJournalsList" class="space-y-4">
                    <p class="text-gray-500 text-center py-4">Belum ada data jurnal yang tersimpan</p>
                </div>
            </div>

            <div class="sticky bottom-0 z-40 bg-gray-50/95 backdrop-blur pt-4 pb-4 border-t border-gray-200 mt-8 flex justify-between">
                <button onclick="goToStep(1)" class="bg-white border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-100 transition-all shadow-sm">
                    <i class="fas fa-arrow-left mr-2"></i>Kembali
                </button>
                <button onclick="goToStep(3)" class="bg-gray-800 text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-700 transition-all shadow-lg shadow-gray-400/50">
                    Lanjut ke Analisis <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </section>

        <section id="step3" class="hidden-section relative">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Langkah 3: Analisis Multi-Jurnal</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">Analisis komparatif otomatis dengan format tabel siap pakai.</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                    <h3 class="text-xl font-bold mb-4 flex items-center text-purple-600">
                        <i class="fas fa-magic mr-3"></i>Prompt Step 3 (Copy Ini)
                    </h3>
                    
                    <div class="flex-grow flex flex-col mb-4">
                        <div class="bg-gray-900 rounded-xl p-4 relative flex-grow overflow-hidden min-h-[300px]">
                            <button onclick="copyPromptText('step3-prompt')" class="copy-btn absolute top-2 right-2 bg-purple-600 text-white px-3 py-1 rounded text-xs hover:bg-purple-700 transition-all z-10" data-prompt-id="step3-prompt">
                                <i class="fas fa-copy mr-1"></i>Copy
                            </button>
                            <div class="absolute inset-0 p-4 overflow-y-auto mt-8 custom-scrollbar">
                                <pre id="step3-prompt" class="text-green-400 text-xs whitespace-pre-wrap font-mono m-0">ANALISIS KOMPARATIF - OUTPUT FORMAT TABEL

Analisis jurnal berikut dan berikan output HANYA dalam format tabel:

[INSERT SEMUA DATA JURNAL DARI STEP 2]

OUTPUT HARUS PERSIS FORMAT INI:

| Aspek Analisis | Temuan |
|----------------|--------|
| Tema Penelitian Dominan | [tema1; tema2; tema3] |
| Metode yang Sering Digunakan | [metode1; metode2] |
| Teknologi/Alat Umum | [alat1; alat2; alat3] |
| Populasi/Sample yang Diteliti | [populasi1; populasi2] |
| Variabel yang Sering Muncul | [var1; var2; var3] |
| Hasil yang Kontradiktif | [jika ada] |
| Hasil yang Saling Mendukung | [temuan serupa] |

---

| Research Gap Teridentifikasi | Detail |
|------------------------------|--------|
| Gap Metodologi | [metode belum digunakan] |
| Gap Teknologi | [teknologi belum diintegrasikan] |
| Gap Populasi | [lokasi belum diteliti] |
| Gap Variabel | [hubungan belum dieksplorasi] |
| Gap Konteks | [konteks belum tercakup] |

---

| Peluang Penelitian Baru | Detail |
|-------------------------|--------|
| Kombinasi Metode | [metode A + metode B] |
| Integrasi Teknologi | [teknologi X dengan Y] |
| Lokasi Baru | [daerah potensial] |
| Variabel Baru | [variabel belum dihubungkan] |</pre>
                            </div>
                        </div>
                    </div>

                    <button onclick="openGeminiWithPrompt('step3-prompt')" class="mt-auto w-full bg-purple-600 text-white py-4 rounded-xl font-bold hover:bg-purple-700 transition-all shadow-lg flex-shrink-0">
                        <i class="fas fa-external-link-alt mr-2"></i>Buka Gemini & Auto-Paste
                    </button>
                </div>

                <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                    <h3 class="text-xl font-bold mb-4 flex items-center text-green-600">
                        <i class="fas fa-paste mr-3"></i>Paste Hasil Analisis
                    </h3>
                    
                    <div class="flex-grow mb-4 flex flex-col relative min-h-[300px]">
                        <textarea id="geminiOutputStep3" class="w-full h-full absolute inset-0 p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none font-mono text-sm table-output resize-none custom-scrollbar" placeholder="Paste hasil tabel analisis komparatif dari Gemini..."></textarea>
                    </div>

                    <button onclick="parseStep3Output()" class="mt-auto w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-[1.02] transition-all flex-shrink-0">
                        <i class="fas fa-magic mr-2"></i>Parse & Simpan Analisis
                    </button>
                </div>
            </div>

            <div class="mt-8 bg-white rounded-2xl shadow-xl p-6 border border-gray-100">
                <h3 class="text-xl font-bold mb-4 border-b pb-2">Ringkasan Analisis Tersimpan</h3>
                <div id="analysisSummary" class="space-y-4">
                    <p class="text-gray-500 text-center py-4">Belum ada analisis yang tersimpan</p>
                </div>
            </div>

            <div class="sticky bottom-0 z-40 bg-gray-50/95 backdrop-blur pt-4 pb-4 border-t border-gray-200 mt-8 flex justify-between">
                <button onclick="goToStep(2)" class="bg-white border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-100 transition-all shadow-sm">
                    <i class="fas fa-arrow-left mr-2"></i>Kembali
                </button>
                <button onclick="goToStep(4)" class="bg-gradient-to-r from-green-600 to-teal-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg shadow-green-400/50 transition-all">
                    Lanjut ke Generate Judul <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </section>

        <section id="step4" class="hidden-section relative">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Langkah 4: Generate Judul Penelitian Baru</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">Generate judul unik berdasarkan research gap dengan format tabel siap pilih.</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                    <h3 class="text-xl font-bold mb-4 flex items-center text-yellow-600">
                        <i class="fas fa-magic mr-3"></i>Prompt Step 4 (Copy Ini)
                    </h3>
                    
                    <div class="flex-grow flex flex-col mb-4">
                        <div class="bg-gray-900 rounded-xl p-4 relative flex-grow overflow-hidden min-h-[300px]">
                            <button onclick="copyPromptText('step4-prompt')" class="copy-btn absolute top-2 right-2 bg-yellow-600 text-white px-3 py-1 rounded text-xs hover:bg-yellow-700 transition-all z-10" data-prompt-id="step4-prompt">
                                <i class="fas fa-copy mr-1"></i>Copy
                            </button>
                            <div class="absolute inset-0 p-4 overflow-y-auto mt-8 custom-scrollbar">
                                <pre id="step4-prompt" class="text-green-400 text-xs whitespace-pre-wrap font-mono m-0">GENERATE JUDUL PENELITIAN - OUTPUT FORMAT TABEL

Berdasarkan research gap berikut, buatkan rekomendasi judul:

[INSERT RESEARCH GAP DARI STEP 3]

OUTPUT HARUS PERSIS FORMAT INI:

| No | Judul Penelitian | Alasan Pemilihan | Metode yang Disarankan | Target Populasi |
|----|------------------|------------------|------------------------|-----------------|
| 1 | [judul lengkap] | [mengapa unik] | [metode detail] | [subjek] |
| 2 | [judul lengkap] | [mengapa unik] | [metode detail] | [subjek] |
| 3 | [judul lengkap] | [mengapa unik] | [metode detail] | [subjek] |
| 4 | [judul lengkap] | [mengapa unik] | [metode detail] | [subjek] |
| 5 | [judul lengkap] | [mengapa unik] | [metode detail] | [subjek] |

---

| Kategori | Rekomendasi |
|----------|-------------|
| Judul Paling Inovatif | [nomor] - [alasan] |
| Judul Paling Feasible | [nomor] - [alasan] |
| Judul dengan Impact Tertinggi | [nomor] - [alasan] |
| Judul untuk Pemula | [nomor] - [alasan] |

KRITERIA JUDUL:
- UNIK - belum pernah diteliti spesifik
- RELEVAN - menjawab masalah aktual
- FEASIBLE - bisa dikerjakan
- NOVEL - variabel/teknik baru
- JELAS - kaidah akademik terpenuhi</pre>
                            </div>
                        </div>
                    </div>

                    <button onclick="openGeminiWithPrompt('step4-prompt')" class="mt-auto w-full bg-yellow-600 text-white py-4 rounded-xl font-bold hover:bg-yellow-700 transition-all shadow-lg flex-shrink-0">
                        <i class="fas fa-external-link-alt mr-2"></i>Buka Gemini & Auto-Paste
                    </button>
                </div>

                <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                    <h3 class="text-xl font-bold mb-4 flex items-center text-green-600">
                        <i class="fas fa-paste mr-3"></i>Paste Hasil Generate Judul
                    </h3>
                    
                    <div class="flex-grow mb-4 flex flex-col relative min-h-[300px]">
                        <textarea id="geminiOutputStep4" class="w-full h-full absolute inset-0 p-4 border-2 border-gray-200 rounded-xl focus:border-yellow-500 focus:outline-none font-mono text-sm table-output resize-none custom-scrollbar" placeholder="Paste hasil tabel judul dari Gemini..."></textarea>
                    </div>
                    
                    <button onclick="parseStep4Output()" class="mt-auto w-full bg-gradient-to-r from-yellow-500 to-orange-500 text-white py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-[1.02] transition-all flex-shrink-0">
                        <i class="fas fa-magic mr-2"></i>Parse & Tampilkan Judul
                    </button>
                </div>
            </div>

            <div class="mt-8 bg-white rounded-2xl shadow-xl p-6 border border-gray-100">
                <h3 class="text-xl font-bold mb-4 border-b pb-2">Pilih Judul untuk Dikembangkan</h3>
                <div id="titleSelectionList" class="space-y-4">
                    <p class="text-gray-500 text-center py-4">Belum ada judul yang di-generate</p>
                </div>
            </div>

            <div class="sticky bottom-0 z-40 bg-gray-50/95 backdrop-blur pt-4 pb-4 border-t border-gray-200 mt-8 flex justify-between">
                <button onclick="goToStep(3)" class="bg-white border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-100 transition-all shadow-sm">
                    <i class="fas fa-arrow-left mr-2"></i>Kembali
                </button>
                </div>
        </section>

        <section id="step5" class="hidden-section relative">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Langkah 5: Penyusunan Proposal (Standar Akademik)</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">9 Bagian proposal dengan prompt standar SINTA/Scopus siap copy-paste.</p>
                
                <div class="mt-6 inline-flex items-center bg-indigo-50 border-2 border-indigo-200 px-6 py-3 rounded-full shadow-sm hover:shadow-md transition-all">
                    <input type="checkbox" id="humanizerToggle" class="w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 cursor-pointer">
                    <label for="humanizerToggle" class="ml-3 text-sm font-bold text-indigo-800 cursor-pointer select-none">
                        <i class="fas fa-user-edit mr-2"></i>Aktifkan Mode Humanizer (Lolos Turnitin < 10%)
                    </label>
                </div>
            </div>

            <div class="bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl shadow-xl p-6 mb-8 text-white">
                <h3 class="text-lg font-bold mb-2">Judul Penelitian yang Dipilih:</h3>
                <p id="selectedTitleDisplayStep5" class="text-xl font-semibold">-</p>
            </div>

            <div class="grid md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8" id="proposal-nav-buttons">
                <button data-section="latar" class="proposal-nav-btn bg-white p-4 rounded-xl shadow hover:shadow-lg transition-all text-center border-2 border-indigo-500">
                    <i class="fas fa-file-alt text-2xl text-indigo-600 mb-2"></i>
                    <p class="text-sm font-semibold mt-2">1. Latar Belakang</p>
                </button>
                <button data-section="rumusan" class="proposal-nav-btn bg-white p-4 rounded-xl shadow hover:shadow-lg transition-all text-center border-2 border-gray-200">
                    <i class="fas fa-question-circle text-2xl text-gray-600 mb-2"></i>
                    <p class="text-sm font-semibold mt-2">2. Rumusan Masalah</p>
                </button>
                <button data-section="tujuan" class="proposal-nav-btn bg-white p-4 rounded-xl shadow hover:shadow-lg transition-all text-center border-2 border-gray-200">
                    <i class="fas fa-bullseye text-2xl text-gray-600 mb-2"></i>
                    <p class="text-sm font-semibold mt-2">3. Tujuan</p>
                </button>
                <button data-section="manfaat" class="proposal-nav-btn bg-white p-4 rounded-xl shadow hover:shadow-lg transition-all text-center border-2 border-gray-200">
                    <i class="fas fa-hand-holding-heart text-2xl text-gray-600 mb-2"></i>
                    <p class="text-sm font-semibold mt-2">4. Manfaat</p>
                </button>
                <button data-section="metode" class="proposal-nav-btn bg-white p-4 rounded-xl shadow hover:shadow-lg transition-all text-center border-2 border-gray-200">
                    <i class="fas fa-flask text-2xl text-gray-600 mb-2"></i>
                    <p class="text-sm font-semibold mt-2">5. Metode</p>
                </button>
                <button data-section="landasan" class="proposal-nav-btn bg-white p-4 rounded-xl shadow hover:shadow-lg transition-all text-center border-2 border-gray-200">
                    <i class="fas fa-book text-2xl text-gray-600 mb-2"></i>
                    <p class="text-sm font-semibold mt-2">6. Landasan Teori</p>
                </button>
                <button data-section="hipotesis" class="proposal-nav-btn bg-white p-4 rounded-xl shadow hover:shadow-lg transition-all text-center border-2 border-gray-200">
                    <i class="fas fa-balance-scale text-2xl text-gray-600 mb-2"></i>
                    <p class="text-sm font-semibold mt-2">7. Hipotesis</p>
                </button>
                <button data-section="jadwal" class="proposal-nav-btn bg-white p-4 rounded-xl shadow hover:shadow-lg transition-all text-center border-2 border-gray-200">
                    <i class="fas fa-calendar-alt text-2xl text-gray-600 mb-2"></i>
                    <p class="text-sm font-semibold mt-2">8. Jadwal & Biaya</p>
                </button>
                <button data-section="daftar" class="proposal-nav-btn bg-white p-4 rounded-xl shadow hover:shadow-lg transition-all text-center border-2 border-gray-200">
                    <i class="fas fa-list-ol text-2xl text-gray-600 mb-2"></i>
                    <p class="text-sm font-semibold mt-2">9. Daftar Pustaka</p>
                </button>
                <button data-section="final" class="proposal-nav-btn bg-gradient-to-r from-green-500 to-teal-500 text-white p-4 rounded-xl shadow hover:shadow-lg transition-all text-center border-2 border-transparent">
                    <i class="fas fa-check-circle text-2xl mb-2"></i>
                    <p class="text-sm font-semibold mt-2">Final Review</p>
                </button>
            </div>

            <div id="proposal-content">
                
                <div id="section-latar" class="proposal-section mb-6">
                    <h3 class="text-2xl font-bold mb-6 text-indigo-700 border-b pb-2">5.1 Latar Belakang</h3>
                    <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-indigo-600"><i class="fas fa-magic mr-3"></i>Prompt Latar Belakang</h4>
                            <div class="flex-grow flex flex-col mb-4">
                                <div class="bg-gray-900 rounded-xl p-4 relative flex-grow overflow-hidden min-h-[250px]">
                                    <button onclick="copyPromptText('prompt-latar')" class="copy-btn absolute top-2 right-2 bg-indigo-600 text-white px-3 py-1 rounded text-xs hover:bg-indigo-700 z-10" data-prompt-id="prompt-latar"><i class="fas fa-copy mr-1"></i>Copy</button>
                                    <div class="absolute inset-0 p-4 overflow-y-auto mt-8 custom-scrollbar">
                                        <pre id="prompt-latar" class="text-green-400 text-xs whitespace-pre-wrap font-mono m-0">LATAR BELAKANG - STANDAR SINTA/SCOPUS

Buatkan latar belakang untuk:
Judul: [JUDUL]
Research Gap: [GAP]
Referensi: [DATA JURNAL]

ATURAN KETAT:
1. Gunakan pola Piramida Terbalik (Global -> Spesifik/Lokal).
2. WAJIB berbasis data empiris, hindari asumsi tanpa dasar.
3. SETIAP paragraf WAJIB memiliki sitasi (Penulis, Tahun) dari Referensi.
4. Tegaskan "Research Gap" dan solusi penelitian ini.

ATURAN OUTPUT MUTLAK:
- TANPA BASA-BASI (Dilarang memberi kalimat sapaan/pengantar/penutup).
- DILARANG menulis ulang judul bab (Jangan tulis "Latar Belakang").
- HANYA output paragraf utuh (800-1000 kata) tanpa tabel.</pre>
                                    </div>
                                </div>
                            </div>
                            <button onclick="openGeminiWithPrompt('prompt-latar')" class="mt-auto w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg flex-shrink-0">
                                <i class="fas fa-external-link-alt mr-2"></i>Buka Gemini & Auto-Paste
                            </button>
                        </div>
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-green-600"><i class="fas fa-paste mr-3"></i>Paste Hasil Gemini</h4>
                            <div class="flex-grow mb-4 flex flex-col relative min-h-[250px]">
                                <textarea id="output-latar" class="w-full h-full absolute inset-0 p-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none custom-scrollbar resize-none text-sm" placeholder="Paste hasil latar belakang dari Gemini..."></textarea>
                            </div>
                            <button onclick="saveProposalSection('latar')" class="mt-auto w-full bg-green-600 text-white py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-[1.02] transition-all flex-shrink-0">
                                <i class="fas fa-save mr-2"></i>Simpan & Lanjut
                            </button>
                        </div>
                    </div>
                </div>

                <div id="section-rumusan" class="proposal-section hidden mb-6">
                    <h3 class="text-2xl font-bold mb-6 text-indigo-700 border-b pb-2">5.2 Rumusan Masalah</h3>
                    <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-indigo-600"><i class="fas fa-magic mr-3"></i>Prompt Rumusan</h4>
                            <div class="flex-grow flex flex-col mb-4">
                                <div class="bg-gray-900 rounded-xl p-4 relative flex-grow overflow-hidden min-h-[250px]">
                                    <button onclick="copyPromptText('prompt-rumusan')" class="copy-btn absolute top-2 right-2 bg-indigo-600 text-white px-3 py-1 rounded text-xs hover:bg-indigo-700 z-10" data-prompt-id="prompt-rumusan"><i class="fas fa-copy mr-1"></i>Copy</button>
                                    <div class="absolute inset-0 p-4 overflow-y-auto mt-8 custom-scrollbar">
                                        <pre id="prompt-rumusan" class="text-green-400 text-xs whitespace-pre-wrap font-mono m-0">RUMUSAN MASALAH - FORMAT AKADEMIK

Buatkan rumusan masalah untuk judul: [JUDUL]

ATURAN KETAT:
1. Harus berupa kalimat tanya (5W+1H) yang tajam.
2. Tidak boleh ada tabel.

ATURAN OUTPUT MUTLAK:
- TANPA BASA-BASI (Dilarang memberi kalimat sapaan/pengantar/penutup).
- DILARANG menulis ulang judul bab.
- Langsung ikuti format teks di bawah ini:

Berdasarkan latar belakang masalah yang telah diuraikan, maka rumusan masalah dalam penelitian ini adalah:
1. [Pertanyaan spesifik 1]
2. [Pertanyaan spesifik 2]

Adapun batasan masalah difokuskan pada:
- [Batasan 1]
- [Batasan 2]</pre>
                                    </div>
                                </div>
                            </div>
                            <button onclick="openGeminiWithPrompt('prompt-rumusan')" class="mt-auto w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg flex-shrink-0">
                                <i class="fas fa-external-link-alt mr-2"></i>Buka Gemini & Auto-Paste
                            </button>
                        </div>
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-green-600"><i class="fas fa-paste mr-3"></i>Paste Hasil Gemini</h4>
                            <div class="flex-grow mb-4 flex flex-col relative min-h-[250px]">
                                <textarea id="output-rumusan" class="w-full h-full absolute inset-0 p-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none custom-scrollbar resize-none text-sm" placeholder="Paste hasil rumusan masalah..."></textarea>
                            </div>
                            <div class="mt-auto flex gap-3 flex-shrink-0">
                                <button onclick="prevProposalSection('rumusan')" class="flex-1 bg-gray-200 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-300 transition-all"><i class="fas fa-arrow-left mr-2"></i>Kembali</button>
                                <button onclick="saveProposalSection('rumusan')" class="flex-1 bg-green-600 text-white py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-[1.02] transition-all"><i class="fas fa-save mr-2"></i>Simpan</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-tujuan" class="proposal-section hidden mb-6">
                    <h3 class="text-2xl font-bold mb-6 text-indigo-700 border-b pb-2">5.3 Tujuan Penelitian</h3>
                    <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-indigo-600"><i class="fas fa-magic mr-3"></i>Prompt Tujuan</h4>
                            <div class="flex-grow flex flex-col mb-4">
                                <div class="bg-gray-900 rounded-xl p-4 relative flex-grow overflow-hidden min-h-[250px]">
                                    <button onclick="copyPromptText('prompt-tujuan')" class="copy-btn absolute top-2 right-2 bg-indigo-600 text-white px-3 py-1 rounded text-xs hover:bg-indigo-700 z-10" data-prompt-id="prompt-tujuan"><i class="fas fa-copy mr-1"></i>Copy</button>
                                    <div class="absolute inset-0 p-4 overflow-y-auto mt-8 custom-scrollbar">
                                        <pre id="prompt-tujuan" class="text-green-400 text-xs whitespace-pre-wrap font-mono m-0">TUJUAN PENELITIAN - FORMAT AKADEMIK

Buatkan tujuan penelitian untuk rumusan masalah berikut: [RUMUSAN]

ATURAN KETAT:
1. Jumlah poin WAJIB sama persis dengan jumlah rumusan masalah.
2. WAJIB gunakan Kata Kerja Operasional (KKO) yang bisa diukur (Menganalisis, Mengevaluasi, Mengembangkan). Dilarang menggunakan kata "Mengetahui".

ATURAN OUTPUT MUTLAK:
- TANPA BASA-BASI (Dilarang memberi kalimat sapaan/pengantar/penutup).
- DILARANG menulis ulang judul bab.
- Langsung ikuti format teks di bawah ini:

Sejalan dengan rumusan masalah di atas, tujuan yang ingin dicapai dalam penelitian ini adalah:
1. [Tujuan sinkron dengan masalah 1]
2. [Tujuan sinkron dengan masalah 2]
3. [Tujuan sinkron dengan masalah 3]</pre>
                                    </div>
                                </div>
                            </div>
                            <button onclick="openGeminiWithPrompt('prompt-tujuan')" class="mt-auto w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg flex-shrink-0">
                                <i class="fas fa-external-link-alt mr-2"></i>Buka Gemini & Auto-Paste
                            </button>
                        </div>
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-green-600"><i class="fas fa-paste mr-3"></i>Paste Hasil Gemini</h4>
                            <div class="flex-grow mb-4 flex flex-col relative min-h-[250px]">
                                <textarea id="output-tujuan" class="w-full h-full absolute inset-0 p-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none custom-scrollbar resize-none text-sm" placeholder="Paste hasil tujuan penelitian..."></textarea>
                            </div>
                            <div class="mt-auto flex gap-3 flex-shrink-0">
                                <button onclick="prevProposalSection('tujuan')" class="flex-1 bg-gray-200 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-300 transition-all"><i class="fas fa-arrow-left mr-2"></i>Kembali</button>
                                <button onclick="saveProposalSection('tujuan')" class="flex-1 bg-green-600 text-white py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-[1.02] transition-all"><i class="fas fa-save mr-2"></i>Simpan</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-manfaat" class="proposal-section hidden mb-6">
                    <h3 class="text-2xl font-bold mb-6 text-indigo-700 border-b pb-2">5.4 Manfaat Penelitian</h3>
                    <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-indigo-600"><i class="fas fa-magic mr-3"></i>Prompt Manfaat</h4>
                            <div class="flex-grow flex flex-col mb-4">
                                <div class="bg-gray-900 rounded-xl p-4 relative flex-grow overflow-hidden min-h-[250px]">
                                    <button onclick="copyPromptText('prompt-manfaat')" class="copy-btn absolute top-2 right-2 bg-indigo-600 text-white px-3 py-1 rounded text-xs hover:bg-indigo-700 z-10" data-prompt-id="prompt-manfaat"><i class="fas fa-copy mr-1"></i>Copy</button>
                                    <div class="absolute inset-0 p-4 overflow-y-auto mt-8 custom-scrollbar">
                                        <pre id="prompt-manfaat" class="text-green-400 text-xs whitespace-pre-wrap font-mono m-0">MANFAAT PENELITIAN - FORMAT NARATIF

Buatkan manfaat penelitian untuk judul: [JUDUL] dan tujuan: [TUJUAN]

ATURAN KETAT:
1. Hindari kalimat klise ("berguna bagi bangsa"). Harus spesifik.
2. Manfaat Teoritis: Kontribusi pada teori terkait.
3. Manfaat Praktis: Solusi nyata untuk stakeholder terkait.

ATURAN OUTPUT MUTLAK:
- TANPA BASA-BASI (Dilarang memberi kalimat sapaan/pengantar/penutup).
- DILARANG menulis ulang judul bab.
- Langsung ikuti format teks di bawah ini:

Penelitian ini diharapkan dapat memberikan manfaat secara teoritis maupun praktis, yaitu:

1. Manfaat Teoritis
[Jelaskan paragraf kontribusi teoritisnya].

2. Manfaat Praktis
[Jelaskan paragraf solusi nyata bagi stakeholder].</pre>
                                    </div>
                                </div>
                            </div>
                            <button onclick="openGeminiWithPrompt('prompt-manfaat')" class="mt-auto w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg flex-shrink-0">
                                <i class="fas fa-external-link-alt mr-2"></i>Buka Gemini & Auto-Paste
                            </button>
                        </div>
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-green-600"><i class="fas fa-paste mr-3"></i>Paste Hasil Gemini</h4>
                            <div class="flex-grow mb-4 flex flex-col relative min-h-[250px]">
                                <textarea id="output-manfaat" class="w-full h-full absolute inset-0 p-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none custom-scrollbar resize-none text-sm" placeholder="Paste hasil manfaat penelitian..."></textarea>
                            </div>
                            <div class="mt-auto flex gap-3 flex-shrink-0">
                                <button onclick="prevProposalSection('manfaat')" class="flex-1 bg-gray-200 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-300 transition-all"><i class="fas fa-arrow-left mr-2"></i>Kembali</button>
                                <button onclick="saveProposalSection('manfaat')" class="flex-1 bg-green-600 text-white py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-[1.02] transition-all"><i class="fas fa-save mr-2"></i>Simpan</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-metode" class="proposal-section hidden mb-6">
                    <h3 class="text-2xl font-bold mb-6 text-indigo-700 border-b pb-2">5.5 Metode Penelitian</h3>
                    <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-indigo-600"><i class="fas fa-magic mr-3"></i>Prompt Metode</h4>
                            <div class="flex-grow flex flex-col mb-4">
                                <div class="bg-gray-900 rounded-xl p-4 relative flex-grow overflow-hidden min-h-[250px]">
                                    <button onclick="copyPromptText('prompt-metode')" class="copy-btn absolute top-2 right-2 bg-indigo-600 text-white px-3 py-1 rounded text-xs hover:bg-indigo-700 z-10" data-prompt-id="prompt-metode"><i class="fas fa-copy mr-1"></i>Copy</button>
                                    <div class="absolute inset-0 p-4 overflow-y-auto mt-8 custom-scrollbar">
                                        <pre id="prompt-metode" class="text-green-400 text-xs whitespace-pre-wrap font-mono m-0">METODE PENELITIAN - FORMAT PARAGRAF TERSTRUKTUR

Buatkan untuk judul: [JUDUL]

ATURAN KETAT:
1. Jangan gunakan tabel. Tulis dalam bentuk Sub-Bab paragraf deskriptif.
2. Pastikan sesuai jenis penelitian (Kuantitatif / Kualitatif / R&D).

ATURAN OUTPUT MUTLAK:
- TANPA BASA-BASI (Dilarang memberi kalimat sapaan/pengantar/penutup).
- DILARANG menulis ulang judul bab "Metode Penelitian".
- Langsung outputkan dengan struktur tebal berikut:

**1. Desain Penelitian**
[Jelaskan paragrafnya]

**2. Lokasi dan Waktu Penelitian**
[Jelaskan paragrafnya]

**3. Populasi dan Sampel / Subjek Penelitian**
[Jelaskan paragrafnya]

**4. Teknik Pengumpulan Data**
[Jelaskan paragrafnya]

**5. Teknik Analisis Data**
[Jelaskan paragrafnya]</pre>
                                    </div>
                                </div>
                            </div>
                            <button onclick="openGeminiWithPrompt('prompt-metode')" class="mt-auto w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg flex-shrink-0">
                                <i class="fas fa-external-link-alt mr-2"></i>Buka Gemini & Auto-Paste
                            </button>
                        </div>
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-green-600"><i class="fas fa-paste mr-3"></i>Paste Hasil Gemini</h4>
                            <div class="flex-grow mb-4 flex flex-col relative min-h-[250px]">
                                <textarea id="output-metode" class="w-full h-full absolute inset-0 p-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none custom-scrollbar resize-none text-sm" placeholder="Paste hasil metode penelitian..."></textarea>
                            </div>
                            <div class="mt-auto flex gap-3 flex-shrink-0">
                                <button onclick="prevProposalSection('metode')" class="flex-1 bg-gray-200 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-300 transition-all"><i class="fas fa-arrow-left mr-2"></i>Kembali</button>
                                <button onclick="saveProposalSection('metode')" class="flex-1 bg-green-600 text-white py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-[1.02] transition-all"><i class="fas fa-save mr-2"></i>Simpan</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-landasan" class="proposal-section hidden mb-6">
                    <h3 class="text-2xl font-bold mb-6 text-indigo-700 border-b pb-2">5.6 Landasan Teori</h3>
                    <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-indigo-600"><i class="fas fa-magic mr-3"></i>Prompt Landasan</h4>
                            <div class="flex-grow flex flex-col mb-4">
                                <div class="bg-gray-900 rounded-xl p-4 relative flex-grow overflow-hidden min-h-[250px]">
                                    <button onclick="copyPromptText('prompt-landasan')" class="copy-btn absolute top-2 right-2 bg-indigo-600 text-white px-3 py-1 rounded text-xs hover:bg-indigo-700 z-10" data-prompt-id="prompt-landasan"><i class="fas fa-copy mr-1"></i>Copy</button>
                                    <div class="absolute inset-0 p-4 overflow-y-auto mt-8 custom-scrollbar">
                                        <pre id="prompt-landasan" class="text-green-400 text-xs whitespace-pre-wrap font-mono m-0">LANDASAN TEORI & STATE OF THE ART

Buatkan untuk judul: [JUDUL] dan variabel: [VARIABEL]

ATURAN OUTPUT MUTLAK:
- TANPA BASA-BASI (Dilarang memberi kalimat sapaan/pengantar/penutup).
- DILARANG menulis ulang judul bab utama.
- Langsung ikuti format di bawah ini:

**1. Kajian Teori**
[Buat 2-3 paragraf naratif yang mensintesis Grand Theory dan variabel utama].

**2. Kerangka Pemikiran**
[Buat 1 paragraf naratif yang menjelaskan alur logika hubungan antar variabel].

**3. Kajian Penelitian Terdahulu (State of the Art)**
[Buatkan 1 TABEL berisi 4 penelitian terdahulu yang relevan. Kolom tabel wajib: | Penulis & Tahun | Judul Penelitian | Metode | Hasil/Temuan | Perbedaan dgn Riset Ini | ]</pre>
                                    </div>
                                </div>
                            </div>
                            <button onclick="openGeminiWithPrompt('prompt-landasan')" class="mt-auto w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg flex-shrink-0">
                                <i class="fas fa-external-link-alt mr-2"></i>Buka Gemini & Auto-Paste
                            </button>
                        </div>
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-green-600"><i class="fas fa-paste mr-3"></i>Paste Hasil Gemini</h4>
                            <div class="flex-grow mb-4 flex flex-col relative min-h-[250px]">
                                <textarea id="output-landasan" class="w-full h-full absolute inset-0 p-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none custom-scrollbar resize-none text-sm" placeholder="Paste hasil landasan teori dan tabel penelitian terdahulu..."></textarea>
                            </div>
                            <div class="mt-auto flex gap-3 flex-shrink-0">
                                <button onclick="prevProposalSection('landasan')" class="flex-1 bg-gray-200 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-300 transition-all"><i class="fas fa-arrow-left mr-2"></i>Kembali</button>
                                <button onclick="saveProposalSection('landasan')" class="flex-1 bg-green-600 text-white py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-[1.02] transition-all"><i class="fas fa-save mr-2"></i>Simpan</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-hipotesis" class="proposal-section hidden mb-6">
                    <h3 class="text-2xl font-bold mb-6 text-indigo-700 border-b pb-2">5.7 Hipotesis</h3>
                    <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-indigo-600"><i class="fas fa-magic mr-3"></i>Prompt Hipotesis</h4>
                            <div class="flex-grow flex flex-col mb-4">
                                <div class="bg-gray-900 rounded-xl p-4 relative flex-grow overflow-hidden min-h-[250px]">
                                    <button onclick="copyPromptText('prompt-hipotesis')" class="copy-btn absolute top-2 right-2 bg-indigo-600 text-white px-3 py-1 rounded text-xs hover:bg-indigo-700 z-10" data-prompt-id="prompt-hipotesis"><i class="fas fa-copy mr-1"></i>Copy</button>
                                    <div class="absolute inset-0 p-4 overflow-y-auto mt-8 custom-scrollbar">
                                        <pre id="prompt-hipotesis" class="text-green-400 text-xs whitespace-pre-wrap font-mono m-0">HIPOTESIS / PERTANYAAN PENELITIAN

Buatkan untuk rumusan: [RUMUSAN] dan variabel: [VARIABEL]

ATURAN OUTPUT MUTLAK:
- TANPA BASA-BASI (Dilarang memberi kalimat sapaan/pengantar/penutup).
- DILARANG menggunakan tabel.
- DILARANG menulis ulang judul bab.
- Langsung ikuti format di bawah ini (Pilih jika Kuantitatif/Kualitatif):

Berdasarkan kajian teori dan kerangka pemikiran, hipotesis dalam penelitian ini dirumuskan sebagai berikut:
1. Hipotesis Pertama:
   - H0: Tidak ada pengaruh/perbedaan antara...
   - Ha: Terdapat pengaruh/perbedaan yang signifikan antara...
2. Hipotesis Kedua:
   - H0: ...
   - Ha: ...</pre>
                                    </div>
                                </div>
                            </div>
                            <button onclick="openGeminiWithPrompt('prompt-hipotesis')" class="mt-auto w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg flex-shrink-0">
                                <i class="fas fa-external-link-alt mr-2"></i>Buka Gemini & Auto-Paste
                            </button>
                        </div>
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-green-600"><i class="fas fa-paste mr-3"></i>Paste Hasil Gemini</h4>
                            <div class="flex items-center mb-4 bg-yellow-50 p-3 rounded-xl border border-yellow-100">
                                <input type="checkbox" id="skip-hipotesis" class="mr-3 w-5 h-5 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded cursor-pointer" onchange="toggleHipotesis()">
                                <label for="skip-hipotesis" class="text-sm font-medium text-yellow-800 cursor-pointer">Centang jika penelitian Anda Kualitatif murni (Lewati Hipotesis)</label>
                            </div>
                            <div class="flex-grow mb-4 flex flex-col relative min-h-[200px]">
                                <textarea id="output-hipotesis" class="w-full h-full absolute inset-0 p-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none custom-scrollbar resize-none text-sm" placeholder="Paste hasil teks hipotesis..."></textarea>
                            </div>
                            <div class="mt-auto flex gap-3 flex-shrink-0">
                                <button onclick="prevProposalSection('hipotesis')" class="flex-1 bg-gray-200 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-300 transition-all"><i class="fas fa-arrow-left mr-2"></i>Kembali</button>
                                <button onclick="saveProposalSection('hipotesis')" class="flex-1 bg-green-600 text-white py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-[1.02] transition-all"><i class="fas fa-save mr-2"></i>Simpan</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-jadwal" class="proposal-section hidden mb-6">
                    <h3 class="text-2xl font-bold mb-6 text-indigo-700 border-b pb-2">5.8 Jadwal & Anggaran</h3>
                    <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-indigo-600"><i class="fas fa-magic mr-3"></i>Prompt Jadwal</h4>
                            <div class="flex-grow flex flex-col mb-4">
                                <div class="bg-gray-900 rounded-xl p-4 relative flex-grow overflow-hidden min-h-[250px]">
                                    <button onclick="copyPromptText('prompt-jadwal')" class="copy-btn absolute top-2 right-2 bg-indigo-600 text-white px-3 py-1 rounded text-xs hover:bg-indigo-700 z-10" data-prompt-id="prompt-jadwal"><i class="fas fa-copy mr-1"></i>Copy</button>
                                    <div class="absolute inset-0 p-4 overflow-y-auto mt-8 custom-scrollbar">
                                        <pre id="prompt-jadwal" class="text-green-400 text-xs whitespace-pre-wrap font-mono m-0">JADWAL & ANGGARAN - WAJIB FORMAT TABEL

Buatkan untuk judul: [JUDUL], durasi: [X bulan], lokasi: [LOKASI]

ATURAN OUTPUT MUTLAK:
- TANPA BASA-BASI (Dilarang memberi kalimat sapaan/pengantar/penutup).
- DILARANG menulis ulang judul bab.
- HANYA output 2 Tabel ini saja secara berurutan:

**1. Jadwal Penelitian**
| No | Tahapan Kegiatan | B1 | B2 | B3 | B4 | B5 | B6 |
|----|------------------|----|----|----|----|----|----|
| 1 | Pengajuan Judul & Izin | ██ | | | | | |
| 2 | Penyusunan Instrumen | | ██ | | | | |
| 3 | Pengumpulan Data Lapangan | | | ██ | ██ | | |
| 4 | Analisis & Validasi Data | | | | | ██ | |
| 5 | Penyusunan Laporan & Sidang | | | | | | ██ |

**2. Rencana Anggaran Biaya (RAB)**
| No | Kategori Komponen Biaya | Rincian Kebutuhan | Estimasi Alokasi (%) |
|----|-------------------------|-------------------|----------------------|
| 1 | Bahan Habis Pakai / ATK | [kertas, print, internet] | 15% |
| 2 | Operasional Lapangan | [transportasi, izin] | 40% |
| 3 | Pengolahan Data | [lisensi software, jilid] | 20% |
| 4 | Publikasi & Pelaporan | [APC Jurnal SINTA] | 25% |
| | | TOTAL | 100% |</pre>
                                    </div>
                                </div>
                            </div>
                            <button onclick="openGeminiWithPrompt('prompt-jadwal')" class="mt-auto w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg flex-shrink-0">
                                <i class="fas fa-external-link-alt mr-2"></i>Buka Gemini & Auto-Paste
                            </button>
                        </div>
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-green-600"><i class="fas fa-paste mr-3"></i>Paste Hasil Gemini</h4>
                            <div class="flex-grow mb-4 flex flex-col relative min-h-[250px]">
                                <textarea id="output-jadwal" class="w-full h-full absolute inset-0 p-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none custom-scrollbar resize-none text-sm font-mono" placeholder="Paste hasil tabel jadwal & anggaran..."></textarea>
                            </div>
                            <div class="mt-auto flex gap-3 flex-shrink-0">
                                <button onclick="prevProposalSection('jadwal')" class="flex-1 bg-gray-200 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-300 transition-all"><i class="fas fa-arrow-left mr-2"></i>Kembali</button>
                                <button onclick="saveProposalSection('jadwal')" class="flex-1 bg-green-600 text-white py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-[1.02] transition-all"><i class="fas fa-save mr-2"></i>Simpan</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-daftar" class="proposal-section hidden mb-6">
                    <h3 class="text-2xl font-bold mb-6 text-indigo-700 border-b pb-2">5.9 Daftar Pustaka</h3>
                    <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-indigo-600"><i class="fas fa-magic mr-3"></i>Prompt Pustaka</h4>
                            <div class="flex-grow flex flex-col mb-4">
                                <div class="bg-gray-900 rounded-xl p-4 relative flex-grow overflow-hidden min-h-[250px]">
                                    <button onclick="copyPromptText('prompt-daftar')" class="copy-btn absolute top-2 right-2 bg-indigo-600 text-white px-3 py-1 rounded text-xs hover:bg-indigo-700 z-10" data-prompt-id="prompt-daftar"><i class="fas fa-copy mr-1"></i>Copy</button>
                                    <div class="absolute inset-0 p-4 overflow-y-auto mt-8 custom-scrollbar">
                                        <pre id="prompt-daftar" class="text-green-400 text-xs whitespace-pre-wrap font-mono m-0">DAFTAR PUSTAKA - REFERENCE MANAGER READY

Buatkan daftar pustaka untuk jurnal: [DATA JURNAL YANG DIKAJI]

ATURAN OUTPUT MUTLAK:
- TANPA BASA-BASI (Dilarang memberi kalimat sapaan/pengantar/penutup).
- DILARANG menggunakan tabel.
- DILARANG menulis ulang judul bab.
- HANYA output teks paragraf dengan style [APA 7th Edition], terurut A-Z. 

Tuliskan minimal 10-15 referensi terkait penelitian ini, prioritas 5 tahun terakhir, dikombinasi dengan [DATA JURNAL YANG DIKAJI].</pre>
                                    </div>
                                </div>
                            </div>
                            <button onclick="openGeminiWithPrompt('prompt-daftar')" class="mt-auto w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg flex-shrink-0">
                                <i class="fas fa-external-link-alt mr-2"></i>Buka Gemini & Auto-Paste
                            </button>
                        </div>
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col h-full border border-gray-100">
                            <h4 class="text-lg font-bold mb-4 flex items-center text-green-600"><i class="fas fa-paste mr-3"></i>Paste Hasil Gemini</h4>
                            <div class="flex-grow mb-4 flex flex-col relative min-h-[250px]">
                                <textarea id="output-daftar" class="w-full h-full absolute inset-0 p-4 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none custom-scrollbar resize-none text-sm" placeholder="Paste hasil daftar pustaka..."></textarea>
                            </div>
                            <div class="mt-auto flex gap-3 flex-shrink-0">
                                <button onclick="prevProposalSection('daftar')" class="flex-1 bg-gray-200 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-300 transition-all"><i class="fas fa-arrow-left mr-2"></i>Kembali</button>
                                <button onclick="saveProposalSection('daftar')" class="flex-1 bg-green-600 text-white py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-[1.02] transition-all"><i class="fas fa-save mr-2"></i>Simpan & Finalisasi</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-final" class="proposal-section hidden bg-white rounded-2xl shadow-xl p-6 mb-6 border border-gray-100">
                    <div class="text-center mb-8 mt-4">
                        <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-check-circle text-4xl text-green-600"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-800">Proposal Selesai!</h3>
                        <p class="text-gray-600 mt-2">Semua data naratif dan tabel Anda telah tersusun di memori aplikasi.</p>
                    </div>

                    <div class="max-w-md mx-auto mb-4 bg-gray-50 p-6 rounded-xl border border-gray-200">
                        <label class="block text-sm font-bold text-gray-700 mb-2">Pilih Format Output Dokumen:</label>
                        <select id="proposalFormat" class="w-full p-3 border-2 border-indigo-200 rounded-xl focus:border-indigo-500 focus:outline-none mb-6 cursor-pointer text-gray-700 font-medium">
                            <option value="bab">Lengkap (BAB I, II, III) - Standar Skripsi</option>
                            <option value="mini">Sederhana (A, B, C...) - Pengajuan Judul</option>
                        </select>

                        <button onclick="downloadDOCX()" class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center justify-center shadow-lg transform hover:scale-[1.02]">
                            <i class="fas fa-file-word mr-2 text-xl"></i>Download DOCX
                        </button>
                    </div>
                </div>
            </div>

            <div class="sticky bottom-0 z-40 bg-gray-50/95 backdrop-blur pt-4 pb-4 border-t border-gray-200 mt-8 flex justify-between">
                <button onclick="goToStep(4)" class="bg-white border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-100 transition-all shadow-sm">
                    <i class="fas fa-arrow-left mr-2"></i>Kembali ke Judul
                </button>
            </div>
        </section>

    </main>

    <div class="fixed bottom-6 right-6 flex flex-col space-y-3 z-50">
        <input type="file" id="file-restore-input" accept=".json" class="hidden" onchange="processRestoreFile(event)">
        
        <button onclick="downloadBackup()" class="bg-blue-600 text-white w-12 h-12 rounded-full shadow-xl hover:bg-blue-700 hover:scale-110 transition-all flex items-center justify-center group relative">
            <i class="fas fa-download text-xl"></i>
            <span class="absolute right-14 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">Download Backup (.json)</span>
        </button>
        <button onclick="triggerRestore()" class="bg-green-600 text-white w-12 h-12 rounded-full shadow-xl hover:bg-green-700 hover:scale-110 transition-all flex items-center justify-center group relative">
            <i class="fas fa-upload text-xl"></i>
            <span class="absolute right-14 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">Upload Backup (.json)</span>
        </button>
        <button onclick="showConfirmModal()" class="bg-red-600 text-white w-12 h-12 rounded-full shadow-xl hover:bg-red-700 hover:scale-110 transition-all flex items-center justify-center group relative">
            <i class="fas fa-trash-alt text-xl"></i>
            <span class="absolute right-14 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">Reset App</span>
        </button>
    </div>

    <div id="customAlertModal" class="fixed inset-0 z-[110] hidden flex items-center justify-center">
        <div class="absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity" onclick="closeCustomAlert()"></div>
        <div class="bg-white rounded-2xl shadow-2xl w-11/12 max-w-sm p-6 relative z-10 transform scale-95 opacity-0 transition-all duration-300" id="customAlertCard">
            <div id="customAlertIcon" class="w-14 h-14 rounded-full flex items-center justify-center text-2xl mb-4 mx-auto">
                </div>
            <h3 id="customAlertTitle" class="text-xl font-bold text-center text-gray-800 mb-2">Pesan</h3>
            <p id="customAlertMessage" class="text-gray-600 text-center text-sm mb-6">Detail pesan di sini.</p>
            <button onclick="closeCustomAlert()" class="w-full bg-indigo-600 text-white font-semibold py-3 rounded-xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-500/30">
                Mengerti
            </button>
        </div>
    </div>

    <div id="customConfirmModal" class="fixed inset-0 z-[110] hidden flex items-center justify-center">
        <div class="absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity" onclick="closeConfirmModal()"></div>
        <div class="bg-white rounded-2xl shadow-2xl w-11/12 max-w-sm p-6 relative z-10 transform scale-95 opacity-0 transition-all duration-300" id="customConfirmCard">
            <div class="w-14 h-14 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-2xl mb-4 mx-auto">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h3 class="text-xl font-bold text-center text-gray-800 mb-2">Reset Aplikasi?</h3>
            <p class="text-gray-600 text-center text-sm mb-6">Pastikan Anda sudah men-download backup. Semua progress di layar akan terhapus dan tidak bisa dikembalikan.</p>
            <div class="flex gap-3">
                <button onclick="closeConfirmModal()" class="flex-1 bg-gray-100 text-gray-700 font-semibold py-3 rounded-xl hover:bg-gray-200 transition-all">Batal</button>
                <button onclick="executeReset()" class="flex-1 bg-red-600 text-white font-semibold py-3 rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-500/30">Ya, Reset</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>